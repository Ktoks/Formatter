# Formatter

## Where I'm at:

```xml
<powerstream
win_run_path="%%runpath2"
unix_run_path="%%runpath"
name="powerstream"
>
  <project
  name="%%my_name"
  client="%%my_client"
  client_code="%%my_client_code"
  project="%%my_project"
  project_code="%%my_project_code"
  project_id="%%my_pid"
  location="%%my_location"
  location_code="%%my_location_code"
  sales_code="%%sales"
  project_manager_name="%%my_project_manager_name"
  project_manager="%%my_project_manager"
  project_manager_email="%%my_project_manager_email"
  programmer_name="%%my_programmer_name"
  programmer="%%my_programmer"
  programmer_email="%%my_programmer_email"
  disable="n"
  />
  <processes
  ver="%%ver"
  arch="3"
  jobcond="4"
  jobtype="distribution"
  reset_files="y"
  reset_qual_info="n"
  email_error="n"
  emlto_error="\$programmer_email"
  site="$my_site"
  psite="$my_psite"
  csite="$my_csite"
  msite="$my_msite"
  asite="$my_asite"
  sbu="ins"
  household="$my_household"
  dis_household="y"
  verimove="$my_verimove"
  dis_verimove="y"
  pivot_track="$my_pivot_track"
  dis_pivot_proof="y"
  pivot_proof="$my_pivot_proof"
  dis_pivot_track="y"
  pivot_archive="$my_pivot_archive"
  dis_pivot_archive="y"
  pivot_report="$my_pivot_report"
  dis_pivot_report="y"
  my_vmvid="$client_vmvid"
  adf_type="mrdf"
  chunk_qty="20000"
  brk_type="pages"
  mstmf="n"
  mdate="00000000"
  mclass="1"
  permt="$my_permit"
  printer="$my_printer"
  printer_type="$my_printer_type"
  ffile="$SITE$LVL.$SBU.$PI$n.$PJT"
  rundir="$pi${n}_$c"
  pjtpath="/bcs/$psite$lvlc/clientapp/$pi$pjt/"
  runpath="/bcs/$psite$lvl/clientapp/$pi$pjt/run/$rundir/"
  passpath="/bcs/$psite$lvl/clientapp/$pi$pjt/pass/"
  genlib="/apps/powerstream/gen$levels$tver/"
  usrinputs="${pjtpath}input/"
  usrscripts="${pjtpath}scripts/"
  usrskels="${pjtpath}skel/"
  usrloads="${pjtpath}load/"
  usrparms="${pjtpath}parm/"
  usrresources="${pjtpath}parm/"
  usrruns="${pjtpath}run/"
  usrarcs="/arc/$psite$lvlc/"
  genskels="${genlib}skel/"
  genloads="${genlib}load/"
  genparms="${genlib}parm/"
  genscripts="${genlib}perl/"
  genperls="${genlib}perl/"
  gencopys="${genlib}copy/"
  arcrep="30;"
  include_dir="${pjtpath}parm/outobjects/"
  name="processes"
  gsvers="/apps/ghostscript_9.10/bin/gs"
  test_module_library="$usrscripts"
  Dialogue_Version="V9R0M112SB"
  disable="n"
  >
    <defaults
    name="defaults"
    lvl="t"
    lvlc="t"
    lvls="p"
    n="9999"
    c="01"
    copy_base="$c"
    jobid="00"
    sales="8000"
    sr="$sales"
    project_id="$my_pid"
    location="$my_location"
    location_code="$my_location_code"
    infile="/bcs/$site$lvl/clientapp/$pi$pjt/input/"
    reprint="$FFILE.MISS${JOBID}V$v"
    inreprint="/bcs/lgn$lvl/input/$reprint"
    auto_order_number="y"
    orderNumberSave="y"
    get_day="none"
    mailsize="l"
    diskoption="isilon"
    sol_val="n"
    auto_arcstore_force="y"
    xmtovr="False"
    disable_xmit="n"
    xmit_on="y"
    mailer_id=""
    sftp_out=""
    sftp_in=""
    jss_user_field=""
    epcsnd="y"
    jss_dis="y"
    msort="n"
    tplcli=""
    tplext=""
    tplsuf=""
    tpldesdir=""
    mask_base="pdn"
    outmask="${mask_base}o${mask_id}.c${c}xx.cr"
    ver="04r20a"
    _ver="int13087"
    mailgroup="1"
    maxsheets="5"
    pdpver="/apps/poppler_0.51/bin/"
    doc_composer="$my_comp_type"
    pwrstrm_composer="annot"
    paper_stock="NULL"
    paper_weight="NULL"
    paper_thickness="NULL"
    gmc_chunk_size="NaN"
    gmc_input_type="NULL"
    hhd_option="$my_hhd_option"
    my_tplpri="$tplpri"
    pstgcode="$my_pstgcode"
    subcode="$my_subcode"
    client="$my_client"
    client_code="$my_client_code"
    project="$my_project"
    project_code="$my_project_code"
    project_manager_name="$my_project_manager_name"
    project_manager="$my_project_manager"
    project_manager_email="$my_project_manager_email"
    programmer_name="$my_programmer_name"
    programmer="$my_programmer"
    programmer_email="$my_programmer_email"
    pivot_id="$my_pivot_id"
    pub_file="$my_pub_file"
    outobject_type="NULL"
    erd_type="NULL"
    disable="n"
    />
    <process
    name="full_process"
    disable="n"
    >
      <module
      name="pre_setup_prod"
      modname="genpre01"
      precpy="m"
      preorg="y"
      disable="t"
      />
      <module
      name="pre_setup_test"
      modname="genpre01"
      precpy="y"
      preorg="y"
      disable="p"
      />
      <module
      name="dupcheck_$post"
      modname="gendup01"
      dupact="2"
      dupfr="\$project_manager_email"
      dupmask1="$inwork"
      dupto="\$project_manager_email,\$programmer_email"
      duptto="\$programmer_email"
      disable="tr"
      />
      <loop
      name="loop_pre_process"
      loop_end="1"
      loop_inc="1"
      loop_start="1"
      disable="n"
      >
        <subprocess
        name="pre_process_0$loop_counter"
        input="0$loop_counter"
        processname="pre_process"
        disable="n"
        />
      </loop>
        <subprocess
        name="mid_process"
        processname="mid_process"
        disable="n"
        />
        <loop
        name="loop_post_process"
        loop_start="1"
        loop_end="1"
        loop_inc="1"
        disable="n"
        >
          <if
          name="if_for_loop_post_process"
          disable="n"
          >
            <condition
            name="condition_for_loop_post_process_1"
            disable="n"
            >
              <![CDATA[($loop_counter==1)              ]]>
              <assign
              name="assign_post_process_loop_$c"
              c="01"
              post="$c"
              msize="$mailsize"
              _msort="y"
              postfile="${runpath}c${c}_batout.txt"
              outmask="$outmask"
              disable="n"
              />
            </condition>
            </if>
              <module
              name="post_process_check_0$loop_counter"
              modname="genemp01"
              empinp="$postfile"
              disable="n"
              />
              <if
              name="if_post_process_empty_check_0$loop_counter"
              disable="n"
              >
                <condition
                name="condition_post_process_empty_check_0$loop_counter"
                disable="n"
                >
                  <![CDATA[($emprc == 0)                  ]]>
                  <subprocess
                  name="post_process_0$loop_counter"
                  processname="post_process"
                  disable="n"
                  />
                </condition>
                  <else
                  name="else_post_process_empty_check_0$loop_counter"
                  disable="n"
                  >
                    <module
                    name="empty_file_for_0$loop_counter"
                    modname="genemf01"
                    emffrp="n"
                    emfbat="$batchid"
                    emftyp="copy"
                    emfeml="n"
                    disable="n"
                    />
                    <module
                    name="archiving_empty"
                    modname="genarc02"
                    arcrmd="n"
                    arcforce="y"
                    disable="n"
                    />
                  </else>
                  </if>
                  </loop>
                    <subprocess
                    name="final_process"
                    processname="final_process"
                    disable="n"
                    />
                  </process>
<!-- ================================================================================================ -->
<!-- Extra Processes to be called as needed -->
<!-- ================================================================================================ -->
                    <process
                    name="pdfinput_dir_process"
                    disable="n"
                    >
                      <system
                      name="make_pdf_dir_if_needed"
                      command="if
                      test
                      -d
                      ${runpath}pdf_files;
                      then
                      echo
                      'Directory
                      ${runpath}pdf_files
                      already
                      exists';
                      else
                      mkdir
                      ${runpath}pdf_files;
                      fi"
                      disable="n"
                      />
                      <if
                      name="if_input_is_zip"
                      disable="n"
                      >
                        <condition
                        name="condition_file_list_select"
                        disable="n"
                        >
                          <![CDATA[($inwork =~ /.*\.zip$/i)                          ]]>
                          <module
                          name="unzip"
                          modname="genuzp01"
                          uzpname="$inwork"
                          uzpdir="${runpath}pdf_files"
                          disable="n"
                          />
                        </condition>
                          <else
                          >
                            <module
                            name="copy_pdfs_to_directory$post"
                            modname="gencpy01"
                            cpyinp="$inwork"
                            cpyout="${runpath}pdf_files/"
                            disable="n"
                            />
                          </else>
                          </if>
                          </process>
                            <process
                            name="pdfinput_process"
                            disable="n"
                            >
                              <subprocess
                              name="unzip_or_copy_input_for_gmc_usage"
                              processname="pdfinput_dir_process"
                              disable="n"
                              />
                              <assign
                              name="assign_gmc_defaults"
                              gmc_Workflow="${usrparms}${gmc_wfd_name}"
                              gmc_Infile="${runpath}pdf_files"
                              gmc_outfile="${pre}.outpdf.${loop_counter}"
                              gmc_Job="${usrparms}${gmc_job_name}"
                              gmc_file_chunk="XXXX"
                              disable="n"
                              />
                              <module
                              name="gmc_pdf"
                              modname="gmc_motor"
                              gmc_cmd="${gmc_Workflow}
                              -pdfdirPDFInput
                              ${gmc_Infile}
                              -e
                              PDF
                              -o
                              Production
                              -c
                              ${gmc_Job}
                              -f
                              ${gmc_outfile}
                              -l
                              ${runpath}gmc_log${loop_counter}"
                              gmc_motor_control="${pre}.gmcmsgs${loop_counter}"
                              gmc_message_file="$pre.gmcmsgs${loop_counter}"
                              powerapp_path="/apps/services/powerapps/5.0.0/"
                              disable="n"
                              />
                              <module
                              name="extract_0$loop_counter"
                              modname="genext01"
                              RECON_STEP_NAME="INPUT
                              CHUNK:
                              $gmc_file_chunk"
                              extrac="${pre}.extrac${loop_counter}"
                              diskoption="isilon"
                              extinp="${gmc_outfile}"
                              extsto="$extinp"
                              extrcn="${pre}.extrcn${loop_counter}"
                              disable="n"
                              />
                              <module
                              name="cat_recons"
                              modname="gencat01"
                              catinp="$pre.extrac*"
                              catout="$pre.extraccomb$post"
                              catapp="n"
                              disable="n"
                              />
                              <command
                              name="perl_for_client_count_0$loop_counter"
                              disable="n"
                              >
                                <![CDATA[use POSIX; $validsheetcount=0; $validpagecount=0; $validpackagecount=0; $validpackagecount = `cat $pre.extraccomb$post | wc -l`; $validsheetcount = ceil($validpackagecount/2); $validpagecount = $validpackagecount;                                ]]>
                              </command>
                                <module
                                name="custom_client_recon_feed_0$loop_counter"
                                modname="genrcx01"
                                rcxdes="Custom
                                Client
                                Counts
                                $loop_counter"
                                rcxdocumentstotal="$validpackagecount"
                                rcxopt="s"
                                rcxpagestotal="$validpagecount"
                                rcxrcn="$pre.client.counts"
                                rcxsheetstotal="$validsheetcount"
                                rcxtyp="client"
                                disable="n"
                                />
                                <module
                                name="cat_recons"
                                modname="gencat01"
                                catinp="$pre.extrcn*"
                                catout="$pre.extrcncomb$post"
                                catapp="n"
                                disable="n"
                                />
                              </process>
                                <process
                                name="gmc_process"
                                disable="n"
                                >
<!-- Make GMC assignments, turns things on and off -->
<!-- NOTE: These assign settings and the gmc_cmd variable will need to be adjusted according to your needs -->
                                  <system
                                  name="Forks
                                  input
                                  files
                                  into
                                  smaller
                                  chunks"
                                  command="/apps/python_2.7/bin/python2.7
                                  ${usrscripts}fork_file_data.py
                                  ${inwork}
                                  $gmc_chunk_size"
                                  memo="Fork
                                  process
                                  to
                                  decrease
                                  GMC
                                  process
                                  time"
                                  disable="n"
                                  />
                                  <loop
                                  name="loop_fork_input_file"
                                  loop_dir="${runpath}"
                                  loop_filemask="${inbasename}*chnk_*"
                                  loop_process_save_log="n"
                                  loop_max_process="5"
                                  disable="n"
                                  >
                                    <assign
                                    name="assign_gmc_defaults"
                                    gmc_Workflow="${usrparms}${gmc_wfd_name}"
                                    gmc_Infile="$loop_dir_curfile"
                                    gmc_outfile="${pre}.outpdf.${loop_counter}"
                                    gmc_Job="${usrparms}${gmc_job_name}"
                                    gmc_file_chunk="XXXX"
                                    disable="n"
                                    />
                                    <command
                                    stepname="set_gmc_input_module"
                                    disable="n"
                                    >
                                      <![CDATA[# set input module to call in GMC command if ($gmc_input_type =~ /xml/i) { $gmc_input_module = "XMLDataInput1"; } elsif ($gmc_input_type =~ /std/i) { $gmc_input_module = "QTL2"; } else { die "Invalid \$gmc_input_type value: $gmc_input_type - Expected xml or std."; }                                      ]]>
                                    </command>
                                      <command
                                      stepname="get_filetype"
                                      disable="n"
                                      >
                                        <![CDATA[$inbasename =~ /LGN[TP\.FIN\.GNW0000\.(.{5})/; $template_Type = $1; print "File Type: $template_Type\n";                                        ]]>
                                      </command>
                                        <module
                                        name="gmc_pdf"
                                        modname="gmc_motor"
                                        gmc_cmd="${gmc_Workflow}
                                        -InputFileParamInput1
                                        $template_Type
                                        -dif${gmc_input_module}
                                        ${gmc_Infile}
                                        -e
                                        PDF
                                        -o
                                        Production
                                        -c
                                        ${gmc_Job}
                                        -useincluded
                                        Workflow
                                        -f
                                        ${gmc_outfile}
                                        -l
                                        ${runpath}gmc_log${loop_counter}"
                                        gmc_motor_control="${pre}.gmcmsgs${loop_counter}"
                                        gmc_message_file="$pre.gmcmsgs${loop_counter}"
                                        powerapp_path="/apps/services/powerapps/5.0.0/"
                                        disable="n"
                                        />
                                        <command
                                        stepname="get_chunk_name"
                                        disable="n"
                                        >
                                          <![CDATA[# get chunk name from the current input file. if ($loop_curfile =~ /.*chnk\_(\d+)/) { $gmc_file_chunk = $1; } print "\$gmc_file_chunk: $gmc_file_chunk\n"; print "\$loop_curfile: $loop_curfile\n";                                          ]]>
                                        </command>
                                          <module
                                          name="extract_0$loop_counter"
                                          modname="genext01"
                                          RECON_STEP_NAME="INPUT
                                          CHUNK:
                                          $gmc_file_chunk"
                                          extrac="${pre}.extrac${loop_counter}"
                                          extinp="${gmc_outfile}"
                                          extsto="$extinp"
                                          extrcn="${pre}.extrcn${loop_counter}"
                                          disable="n"
                                          />
                                        </loop>
                                          <module
                                          name="cat_recons"
                                          modname="gencat01"
                                          catinp="$pre.extrac*"
                                          catout="$pre.extraccomb$post"
                                          catapp="n"
                                          disable="n"
                                          />
                                          <module
                                          name="cat_recons"
                                          modname="gencat01"
                                          catinp="$pre.extrcn*"
                                          catout="$pre.extrcncomb$post"
                                          catapp="n"
                                          disable="n"
                                          />
                                        </process>
                                          <process
                                          name="dialogue_process"
                                          disable="n"
                                          >
                                            <makefile
                                            name="make_dialogue_control_file_0$loop_counter"
                                            file_name="$pre.diactl$post"
                                            remove_makefile_leading_spaces="y"
                                            disable="n"
                                            >
                                              <![CDATA[>>FILE_START -CONTROLFILE=/apps/dialogue/${Dialogue_Version}/key -MSGRESOURCE=/apps/dialogue/${Dialogue_Version}/MsgResource_en-us.dat -PACKAGEFILE=${usrparms}${pub_file} -MESSAGEFILE=$pre.exmsgs01 -FILEMAP=DD:INPUT,$inwork -FILEMAP=DD:EXTRACT,$pre.extraccomb$post -FILEMAP=DD:OUTPDF,$pre.outpdf01 -RUNMODE=PRODUCTION -TRACKIN=DISABLE -TRACKOUT=NONE -REPORT=NONE -MSG=1850,W >>FILE_END                                              ]]>
                                            </makefile>
                                              <system
                                              name="dialogue_execution_0$loop_counter"
                                              command="/apps/dialogue/${Dialogue_Version}/Engine
                                              -CONTROLFILE='$file_name'"
                                              disable="n"
                                              />
                                              <module
                                              name="extract"
                                              modname="genext01"
                                              extnum="01"
                                              extinp="$pre.outpdf01"
                                              extrac="$pre.extraccomb$post"
                                              extsto="$extinp"
                                              extres="$pre.resour01"
                                              extaud="$pre.audrpt01"
                                              extsid="$pre.extsid01"
                                              extrcn="$pre.extrcncomb$post"
                                              id="22"
                                              memo=""
                                              pwrstrm_composer="dialogue"
                                              disable="n"
                                              />
                                            </process>
                                              <process
                                              name="site_select_process"
                                              disable="n"
                                              >
                                                <if
                                                name="if_file_list_select"
                                                disable="n"
                                                >
                                                  <condition
                                                  name="condition_file_list_select"
                                                  disable="n"
                                                  >
                                                    <![CDATA[($app_process_name eq "reprint_process")                                                    ]]>
                                                    <assign
                                                    name="assign_damaged_file_list"
                                                    Lst_file="$pre.dmglst${post}"
                                                    disable="n"
                                                    />
                                                  </condition>
                                                    <else
                                                    >
                                                      <assign
                                                      name="assign_normal_file_list"
                                                      Lst_file="$pre.outlst$post"
                                                      disable="n"
                                                      />
                                                    </else>
                                                    </if>
                                                      <if
                                                      name="if_msite_location"
                                                      disable="n"
                                                      >
<!-- - print in Logan -->
                                                        <condition
                                                        name="condition_msite_eq_lgn"
                                                        disable="n"
                                                        >
                                                          <![CDATA[($msite eq "lgn")                                                          ]]>
                                                          <assign
                                                          name="assign_erd_type"
                                                          erd_type="copy"
                                                          disable="n"
                                                          />
                                                          <if
                                                          name="if_printer_selection"
                                                          disable="n"
                                                          >
                                                            <condition
                                                            name="condition_xerox_or_OCE_printers"
                                                            disable="n"
                                                            >
                                                              <![CDATA[($printer =~ /xerox|oce/i)                                                              ]]>
                                                              <module
                                                              name="add_tray_call"
                                                              modname="genatj01"
                                                              atjinp="$pre.*cr????"
                                                              atjjog="n"
                                                              duplex="y"
                                                              disable="n"
                                                              />
                                                            </condition>
<!-- print in Logan. Needs to be Low to High, face-up for PJ -->
                                                              <condition
                                                              name="condition_proteus_jet_printer"
                                                              disable="n"
                                                              >
                                                                <![CDATA[($printer eq "pro")                                                                ]]>
                                                                <loop
                                                                name="nupimposeloop"
                                                                loop_data_file="$Lst_file"
                                                                disable="n"
                                                                >
                                                                  <module
                                                                  name="reorder_pages"
                                                                  modname="genreo01"
                                                                  reoinp="$runpath$loop_curline"
                                                                  reotyp="r"
                                                                  reover="2"
                                                                  disable="n"
                                                                  />
                                                                </loop>
                                                                </condition>
                                                                </if>
                                                                  <module
                                                                  name="tapeless_$batchid$c"
                                                                  modname="gentpl01"
                                                                  _tplsuf="$my_tplsuf"
                                                                  _tplext=".pdf"
                                                                  tpllst="$Lst_file"
                                                                  tplpri="$my_tplpri"
                                                                  disable="n"
                                                                  />
                                                                </condition>
<!-- - print in Chicago -->
                                                                  <condition
                                                                  name="condition_msite_eq_chg"
                                                                  disable="n"
                                                                  >
                                                                    <assign
                                                                    name="assign_erd_type"
                                                                    erd_type="copy"
                                                                    disable="n"
                                                                    />
                                                                    <![CDATA[($msite eq "chg")                                                                    ]]>
                                                                    <module
                                                                    name="tapeless_$batchid$c"
                                                                    modname="gentpl01"
                                                                    _tplsuf="$my_tplsuf"
                                                                    _tplext=".pdf"
                                                                    tpllst="$Lst_file"
                                                                    tplpri="$my_tplpri"
                                                                    disable="n"
                                                                    />
                                                                  </condition>
<!-- - print in Dallas -->
                                                                    <condition
                                                                    name="condition_msite_eq_dal"
                                                                    disable="n"
                                                                    >
                                                                      <![CDATA[($msite eq "dal")                                                                      ]]>
                                                                      <assign
                                                                      name="assign_erd_type"
                                                                      erd_type="batch"
                                                                      disable="n"
                                                                      />
                                                                      <module
                                                                      name="tapeless_$batchid$c"
                                                                      modname="gentpl01"
                                                                      tplext=".pdf"
                                                                      tpllst="$Lst_file"
                                                                      tplpri="com"
                                                                      disable="n"
                                                                      />
<!-- For JSS Need to change the below variable. Information comes from PM. jsscpnm="Concerto Letters" jssapcd="CON$c" -->
                                                                      <module
                                                                      stepname="genjss01"
                                                                      modname="genjss01"
                                                                      jssspmd="STD"
                                                                      jsscpnm=""
                                                                      jssapcd=""
                                                                      jsscrid="$or"
                                                                      jssstid="LEW"
                                                                      jsspcts="006"
                                                                      jssusd1=""
                                                                      jssusd2=""
                                                                      jssreprint=""
                                                                      jssxmit="y"
                                                                      jssn="$n"
                                                                      jssc="$c"
                                                                      jssusecpy="y"
                                                                      disable="n"
                                                                      />
<!-- Below parts disabled. Only use if job will require clippership. Dallas is implementing WBS system in the future. -->
                                                                      <module
                                                                      name="fedex_file_exist"
                                                                      modname="genemp01"
                                                                      empinp="$pre.repext$post"
                                                                      disable="y"
                                                                      />
                                                                      <if
                                                                      name="if_clippership_file"
                                                                      disable="y"
                                                                      >
                                                                        <condition
                                                                        name="condition_clippership_file"
                                                                        disable="n"
                                                                        >
                                                                          <![CDATA[($emprc == 0)                                                                          ]]>
                                                                          <system
                                                                          name="run_clipper_script"
                                                                          command="perl
                                                                          ${usrscripts}clippership_data_file.pl
                                                                          $pre.repext$post
                                                                          $pre
                                                                          $runpath"
                                                                          memo=""
                                                                          disable="n"
                                                                          />
                                                                          <module
                                                                          stepname="xmit_clippership_files"
                                                                          modname="genxmt01"
                                                                          xmtinp="$pre.06.csv"
                                                                          xmtcfg="label"
                                                                          xmtout="$ffile.06.csv"
                                                                          disable="n"
                                                                          />
                                                                        </condition>
                                                                        </if>
                                                                        </condition>
<!-- - print in West Caldwell -->
                                                                          <condition
                                                                          name="condition_msite_eq_wcw"
                                                                          disable="n"
                                                                          >
                                                                            <![CDATA[($msite eq "wcw")                                                                            ]]>
                                                                            <assign
                                                                            name="assign_erd_type"
                                                                            erd_type="copy"
                                                                            disable="n"
                                                                            />
                                                                            <module
                                                                            name="tapeless_$batchid$c"
                                                                            modname="gentpl01"
                                                                            tpllst="$Lst_file"
                                                                            tplpri="com"
                                                                            disable="n"
                                                                            />
                                                                            <module
                                                                            name="Send_JSS_Files"
                                                                            stepname="genjss01"
                                                                            modname="genjss01"
                                                                            jssspmd="ShipMethod"
                                                                            jsscpnm="$my_jssapcd"
                                                                            jssapcd="$my_printer"
                                                                            jsscrid="$n"
                                                                            jssstid="WC"
                                                                            jsspcts="500"
                                                                            jssusd1=""
                                                                            jssusd2=""
                                                                            jssxmit="y"
                                                                            disable="n"
                                                                            />
                                                                          </condition>
<!-- - print in Thurmont -->
                                                                            <condition
                                                                            name="condition_msite_eq_thu"
                                                                            disable="n"
                                                                            >
                                                                              <assign
                                                                              name="assign_erd_type"
                                                                              erd_type="batch"
                                                                              disable="n"
                                                                              />
                                                                              <![CDATA[($msite eq "thu")                                                                              ]]>
                                                                              <loop
                                                                              name="loop_crite_files_to_convert_to_afp"
                                                                              loop_data_file="$Lst_file"
                                                                              disable="n"
                                                                              >
                                                                                <module
                                                                                name="transform
                                                                                ps
                                                                                8.5
                                                                                X
                                                                                11"
                                                                                modname="gentrn01"
                                                                                trninp="${runpath}${loop_curline}"
                                                                                trnout="${runpath}${loop_curline}"
                                                                                trntyp="o"
                                                                                trnsite="rrd"
                                                                                trnSolimar="pdafxxxx"
                                                                                data_type="pdf"
                                                                                data_type_out="afp"
                                                                                disable="n"
                                                                                />
                                                                              </loop>
                                                                                <module
                                                                                name="tapeless_$batchid$c"
                                                                                modname="gentpl01"
                                                                                _tplsuf="$my_tplsuf"
                                                                                _tplext=".pdf"
                                                                                tplcli="$pi"
                                                                                tpllst="$Lst_file"
                                                                                tplpri="$my_tplpri"
                                                                                disable="n"
                                                                                />
                                                                              </condition>
<!-- - print in Hyde Park -->
                                                                                <condition
                                                                                name="condition_msite_eq_hdp"
                                                                                disable="n"
                                                                                >
                                                                                  <![CDATA[($msite eq "hdp")                                                                                  ]]>
                                                                                  <assign
                                                                                  name="assign_erd_type"
                                                                                  erd_type="batch"
                                                                                  disable="n"
                                                                                  />
                                                                                  <if
                                                                                  name="if_printer_selection"
                                                                                  disable="n"
                                                                                  >
                                                                                    <condition
                                                                                    name="condition_xerox_or_OCE_printers"
                                                                                    disable="n"
                                                                                    >
                                                                                      <![CDATA[($printer =~ /xerox/i)                                                                                      ]]>
                                                                                      <module
                                                                                      name="add_tray_call"
                                                                                      modname="genatj01"
                                                                                      atjinp="$pre.*cr????"
                                                                                      atjjog="n"
                                                                                      duplex="y"
                                                                                      disable="n"
                                                                                      />
                                                                                    </condition>
                                                                                    </if>
                                                                                      <module
                                                                                      name="tapeless_$batchid$c"
                                                                                      modname="gentpl01"
                                                                                      _tplsuf="$my_tplsuf"
                                                                                      _tplext=".pdf"
                                                                                      tpldesdir="$my_tpldesdir"
                                                                                      tpllst="$Lst_file"
                                                                                      tplpri="$my_tplpri"
                                                                                      disable="n"
                                                                                      />
                                                                                    </condition>
                                                                                    </if>
                                                                                    </process>
                                                                                      <process
                                                                                      name="stock_code_process"
                                                                                      disable="n"
                                                                                      >
<!-- Set paper attributes as needed -->
                                                                                        <if
                                                                                        name="if_set_paper_attributes_by_printer"
                                                                                        disable="n"
                                                                                        >
                                                                                          <condition
                                                                                          name="condition_xerox_printer"
                                                                                          disable="n"
                                                                                          >
                                                                                            <![CDATA[($printer eq "xerox")                                                                                            ]]>
<!-- print in Logan -->
                                                                                            <assign
                                                                                            name="set_paper_attributes_xerox"
                                                                                            paper_stock="660000"
                                                                                            paper_weight="01.2"
                                                                                            paper_thickness="00.46"
                                                                                            ome_stock="112270"
                                                                                            ome_thickness="1.220"
                                                                                            ome_weight="2.43"
                                                                                            qrec_type="alternating"
                                                                                            qrec_freq="500"
                                                                                            qrec_start="500"
                                                                                            disable="n"
                                                                                            />
                                                                                          </condition>
                                                                                            <condition
                                                                                            name="condition_proteus_jet_printer"
                                                                                            disable="n"
                                                                                            >
                                                                                              <![CDATA[($printer eq "pro")                                                                                              ]]>
<!-- print in Logan -->
                                                                                              <assign
                                                                                              name="set_paper_attributes_pj"
                                                                                              paper_stock="089572"
                                                                                              paper_weight="01.2"
                                                                                              paper_thickness="00.46"
                                                                                              ome_stock="112270"
                                                                                              ome_thickness="1.220"
                                                                                              ome_weight="2.43"
                                                                                              qrec_type="inserting"
                                                                                              qrec_freq="1000"
                                                                                              qrec_start="1000"
                                                                                              disable="n"
                                                                                              />
                                                                                            </condition>
                                                                                              <condition
                                                                                              name="condition_oce_printer"
                                                                                              disable="n"
                                                                                              >
                                                                                                <![CDATA[($printer eq "oce")                                                                                                ]]>
<!-- print in Logan -->
                                                                                                <assign
                                                                                                name="set_paper_attributes_oce"
                                                                                                paper_stock="095240"
                                                                                                paper_weight="01.2"
                                                                                                paper_thickness="00.46"
                                                                                                ome_stock="112270"
                                                                                                ome_thickness="1.220"
                                                                                                ome_weight="2.43"
                                                                                                qrec_type="alternating"
                                                                                                qrec_freq="500"
                                                                                                qrec_start="500"
                                                                                                disable="n"
                                                                                                />
                                                                                              </condition>
                                                                                              </if>
                                                                                              </process>
                                                                                                <process
                                                                                                name="sequence_order_process"
                                                                                                disable="n"
                                                                                                >
<!-- Set order of sequence numbers, depending on printer -->
                                                                                                  <if
                                                                                                  name="if_printer_selection"
                                                                                                  disable="n"
                                                                                                  >
                                                                                                    <condition
                                                                                                    name="condition_xerox_or_OCE_printers"
                                                                                                    disable="n"
                                                                                                    >
                                                                                                      <![CDATA[($printer =~ /xerox|oce/i)                                                                                                      ]]>
                                                                                                      <assign
                                                                                                      name="set_sequence_number_order_XEROX"
                                                                                                      RUN_SHEET_SETTING="RUN_SHEET_ALL"
                                                                                                      disable="n"
                                                                                                      />
                                                                                                    </condition>
<!-- print in Logan. Needs to be Low to High, face-up for PJ -->
                                                                                                      <condition
                                                                                                      name="condition_proteus_jet_printer"
                                                                                                      disable="n"
                                                                                                      >
                                                                                                        <![CDATA[($printer eq "pro")                                                                                                        ]]>
                                                                                                        <assign
                                                                                                        name="set_sequence_number_order_PJ"
                                                                                                        RUN_SHEET_SETTING="RUN_SHEET_ALL_DESC"
                                                                                                        disable="n"
                                                                                                        />
                                                                                                      </condition>
                                                                                                      </if>
                                                                                                      </process>
<!-- ================================================================================================ -->
<!-- Actual job starts processing here -->
<!-- ================================================================================================ -->
                                                                                                        <process
                                                                                                        name="pre_process"
                                                                                                        disable="n"
                                                                                                        >
                                                                                                          <module
                                                                                                          name="auto_order_update"
                                                                                                          modname="genoup01"
                                                                                                          disable="t"
                                                                                                          />
                                                                                                          <if
                                                                                                          name="if_lvl_eq_t"
                                                                                                          disable="n"
                                                                                                          >
                                                                                                            <condition
                                                                                                            name="condition_lvl_eq_t"
                                                                                                            memo="if
                                                                                                            test
                                                                                                            turn
                                                                                                            off
                                                                                                            email
                                                                                                            and
                                                                                                            ftp"
                                                                                                            >
                                                                                                              <![CDATA[($lvl eq "t")                                                                                                              ]]>
                                                                                                              <assign
                                                                                                              email_on="n"
                                                                                                              ftp_on="n"
                                                                                                              _xmit_on="n"
                                                                                                              disable="n"
                                                                                                              />
                                                                                                            </condition>
                                                                                                            </if>
                                                                                                              <if
                                                                                                              name="if_household_eq_y"
                                                                                                              disable="n"
                                                                                                              >
                                                                                                                <condition
                                                                                                                name="condition_household_eq_y"
                                                                                                                memo="if
                                                                                                                enable
                                                                                                                householding"
                                                                                                                >
                                                                                                                  <![CDATA[($household eq "y")                                                                                                                  ]]>
                                                                                                                  <assign
                                                                                                                  dis_household="n"
                                                                                                                  />
                                                                                                                </condition>
                                                                                                                </if>
                                                                                                                  <if
                                                                                                                  name="if_verimove_eq_y"
                                                                                                                  disable="n"
                                                                                                                  >
                                                                                                                    <condition
                                                                                                                    name="condition_verimove_eq_y"
                                                                                                                    memo="if
                                                                                                                    enable
                                                                                                                    verimove"
                                                                                                                    >
                                                                                                                      <![CDATA[($verimove eq "y")                                                                                                                      ]]>
                                                                                                                      <assign
                                                                                                                      dis_verimove="n"
                                                                                                                      />
                                                                                                                    </condition>
                                                                                                                    </if>
                                                                                                                      <if
                                                                                                                      name="if_pivot_track_eq_y"
                                                                                                                      disable="n"
                                                                                                                      >
                                                                                                                        <condition
                                                                                                                        name="condition_pivot_track_eq_y"
                                                                                                                        memo="if
                                                                                                                        enable
                                                                                                                        pivot
                                                                                                                        track"
                                                                                                                        >
                                                                                                                          <![CDATA[($pivot_track eq "y")                                                                                                                          ]]>
                                                                                                                          <assign
                                                                                                                          dis_pivot_track="n"
                                                                                                                          />
                                                                                                                        </condition>
                                                                                                                        </if>
                                                                                                                          <if
                                                                                                                          name="if_pivot_proof_eq_y"
                                                                                                                          disable="n"
                                                                                                                          >
                                                                                                                            <condition
                                                                                                                            name="condition_pivot_proof_eq_y"
                                                                                                                            memo="if
                                                                                                                            enable
                                                                                                                            pivot
                                                                                                                            proof"
                                                                                                                            >
                                                                                                                              <![CDATA[($pivot_proof eq "y")                                                                                                                              ]]>
                                                                                                                              <assign
                                                                                                                              dis_pivot_proof="n"
                                                                                                                              />
                                                                                                                            </condition>
                                                                                                                            </if>
                                                                                                                              <if
                                                                                                                              name="if_pivot_archive_eq_y"
                                                                                                                              disable="n"
                                                                                                                              >
                                                                                                                                <condition
                                                                                                                                name="condition_pivot_archive_eq_y"
                                                                                                                                memo="if
                                                                                                                                enable
                                                                                                                                pivot
                                                                                                                                archive"
                                                                                                                                >
                                                                                                                                  <![CDATA[($pivot_archive eq "y")                                                                                                                                  ]]>
                                                                                                                                  <assign
                                                                                                                                  dis_pivot_archive="n"
                                                                                                                                  />
                                                                                                                                </condition>
                                                                                                                                </if>
                                                                                                                                  <if
                                                                                                                                  name="if_pivot_report_eq_y"
                                                                                                                                  disable="n"
                                                                                                                                  >
                                                                                                                                    <condition
                                                                                                                                    name="condition_pivot_report_eq_y"
                                                                                                                                    memo="if
                                                                                                                                    enable
                                                                                                                                    pivot
                                                                                                                                    report"
                                                                                                                                    >
                                                                                                                                      <![CDATA[($pivot_report eq "y")                                                                                                                                      ]]>
                                                                                                                                      <assign
                                                                                                                                      dis_pivot_report="n"
                                                                                                                                      />
                                                                                                                                    </condition>
                                                                                                                                    </if>
                                                                                                                                      <command
                                                                                                                                      stepname="print_stuff"
                                                                                                                                      disable="n"
                                                                                                                                      >
                                                                                                                                        <![CDATA[print " site=$site psite=$psite csite=$csite msite=$msite asite=$asite location=$my_location location_code=$my_location_code printer=$my_printer printer_type=$my_printer_type doc_composer=$my_comp_type household=$my_household verimove=$my_verimove pivot_track=$my_pivot_track pivot_proof=$my_pivot_proof \n";                                                                                                                                        ]]>
                                                                                                                                      </command>
                                                                                                                                        <subprocess
                                                                                                                                        name="choose_stock_codes"
                                                                                                                                        processname="stock_code_process"
                                                                                                                                        disable="n"
                                                                                                                                        />
<!-- Generate a client recon count file before possibly forking out into chunks -->
                                                                                                                                        <command
                                                                                                                                        name="perl_for_client_count_0$loop_counter"
                                                                                                                                        disable="n"
                                                                                                                                        >
                                                                                                                                          <$IFH>
                                                                                                                                          <audit
                                                                                                                                          >
                                                                                                                                            <\/audit
                                                                                                                                            >
                                                                                                                                            </command>

```